<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Was ist los?</title>

    <script src="js/mongo_query.js"></script>
    <script>
        function map() {
            emit(this.meta.source, 0)
        }

        function update() {

        }

        function render(res) {
            var newspapers = res.map(e => e["_id"]);

            var checkboxHtml = newspapers.map(e => '<label for="' + e + '">' + e + '</label><input type="checkbox" id="' + e + '"><br>');
            document.getElementById("newspapers").innerHTML = checkboxHtml.reduce((a, b) => a + b);

            Array.from(document.getElementsByTagName("input")).forEach(el => el.onchange = update)
        }

        mongo_query(map, count, render);
    </script>

    <style>
        input {}
    </style>
</head>
<body>
    <div id="form">
        <p>
            <input type="datetime" id="from">
            <input type="datetime" id="to">
        </p>
        <p id="newspapers">
            <!-- this is autogenerated -->
        </p>
    </div>
</body>
</html>